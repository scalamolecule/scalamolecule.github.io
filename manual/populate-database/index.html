<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link href='http://fonts.googleapis.com/css?family=Merriweather+Sans:400,300,300italic,400italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>

  <title>Populate database</title>

  



  
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/highlight/styles/solarized_light.css" rel="stylesheet" />



  <link href="/css/style.css" rel="stylesheet">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon-57-precomposed.png">
  <link rel="shortcut icon" href="/img/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Molecule" />
</head>
<body>
<br>
<div class="container">
  <div class="col-md-12 column" style="padding-left:0px;">
    <div class="col-md-12 column" style="padding-left:0px;height:30px;">

  <div class="col-sm-11 column" style="padding-left:0;">
    <ul class="nav nav-pills">
    
    
      
      <li class="dropdown ">
        <a data-toggle="dropdown" 
          href="/"
          onclick="window.location.href='/';">Molecule</a>
        <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
          
            
              
                <li><a href="http://scalamolecule.github.io/">Home</a></li>
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/home/introduction/">Introduction</a></li>
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/home/setup/">Setup</a></li>
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/home/about/">About</a></li>
              
            
          
        </ul>
      </li>
    
      
      <li class="dropdown ">
        <a data-toggle="dropdown" 
          href="http://scalamolecule.github.io/compare/overview/"
          onclick="window.location.href='http:\/\/scalamolecule.github.io\/compare\/overview\/';">Compare</a>
        <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
          
            
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/compare/sql/">SQL</a></li>
              
            
          
        </ul>
      </li>
    
      
      <li class="dropdown ">
        <a data-toggle="dropdown" 
          href="http://scalamolecule.github.io/tutorials/overview/"
          onclick="window.location.href='http:\/\/scalamolecule.github.io\/tutorials\/overview\/';">Tutorials</a>
        <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
          
            
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/tutorials/seattle/">Seattle</a></li>
              
            
          
        </ul>
      </li>
    
      
      <li class="dropdown active">
        <a data-toggle="dropdown" 
          href="http://scalamolecule.github.io/manual/overview/"
          onclick="window.location.href='http:\/\/scalamolecule.github.io\/manual\/overview\/';">Manual</a>
        <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
          
            
              
            
          
            
              
                <li class="dropdown-submenu">
                  <a href="http://scalamolecule.github.io/manual/basics/">Basics</a>
                  <ul class="dropdown-menu">
                  
                    <li><a href="http://scalamolecule.github.io/manual/basics/attributes/">Attributes</a></li>
                  
                  </ul>
                </li>
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/manual/database-setup/">Database setup</a></li>
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/manual/modelling/">Modelling</a></li>
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/manual/schema-definition/">Schema definition</a></li>
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/manual/populate-database/">Populate database</a></li>
              
            
          
        </ul>
      </li>
    
      
      <li class="dropdown ">
        <a data-toggle="dropdown" 
          href="http://scalamolecule.github.io/developer/overview/"
          onclick="window.location.href='http:\/\/scalamolecule.github.io\/developer\/overview\/';">Developer</a>
        <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
          
            
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/developer/transformation/">Transformation</a></li>
              
            
          
        </ul>
      </li>
    
      
      <li class="dropdown ">
        <a data-toggle="dropdown" 
          href="http://scalamolecule.github.io/community/overview/"
          onclick="window.location.href='http:\/\/scalamolecule.github.io\/community\/overview\/';">Community</a>
        <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
          
            
              
            
          
            
              
                <li><a href="http://scalamolecule.github.io/community/forum/">Forum</a></li>
              
            
          
        </ul>
      </li>
    
    </ul>
  </div>

  <div class="col-xs-1 column" style="padding:4px;height:25px;float:right;">
    <a href="https://github.com/scalamolecule/molecule" 
    class="github-button" 
    data-icon="octicon-star"
    data-count-href="/scalamolecule/stargazers" 
    data-count-api="/repos/scalamolecule/molecule#stargazers_count">Github</a>
  </div>

</div>
  </div> 

<div class="col-sm-2 column" style="padding-left:0;padding-top:22px;padding-left:10px;">
  <ul style="list-style: none; padding:0; margin:0;font-size:12px;">
	  
	  
	           
	      
	      	
		        <li><a href="http://scalamolecule.github.io/manual/overview/">Manual</a></li>
              
	        
	      
	      	
		        <li><a href="http://scalamolecule.github.io/manual/basics/">Basics</a></li>
              
                <ul style="list-style: none; padding-left: 15px;">
                
                  
                    <li><a href="http://scalamolecule.github.io/manual/basics/attributes/">Attributes</a></li>
                  
                
                </ul>
              
	        
	      
	      	
		        <li><a href="http://scalamolecule.github.io/manual/database-setup/">Database setup</a></li>
              
	        
	      
	      	
		        <li><a href="http://scalamolecule.github.io/manual/modelling/">Modelling</a></li>
              
	        
	      
	      	
		        <li><a href="http://scalamolecule.github.io/manual/schema-definition/">Schema definition</a></li>
              
	        
	      
	      	
            <li class="active">Populate database</li>
              
  	      
	      
	    
	  
  </ul>
</div>

<div class="col-sm-10 column" style="padding:0;">
	

<h1 id="populate-database:e9f2a6d6fbcde0decfe7c5afb620a7be">Populate database</h1>

<p>We have <a href="https://github.com/scalamolecule/wiki/Setup-a-Datomic-database">setup the database</a> and now we want to populate it with data.</p>

<p>If we recall the Seattle domain then we have some attributes organized in 3
related namespaces:</p>

<p>[[images/DatomicElements3.png]]</p>

<p><code>Community.type</code>, <code>Community.orgtype</code> and <code>District.region</code> all have fixed
enumerated values to choose from. And <code>Community.category</code> is the only
many-cardinality attribute allowed to have multiple values.</p>

<h3 id="data-molecule:e9f2a6d6fbcde0decfe7c5afb620a7be">Data molecule</h3>

<p>When we ran <code>sbt compile</code>, Molecule also created some boilerplate code
that allow us to insert a new Seattle Community with its related Neighborhood
and District simply like this:</p>

<pre><code class="language-scala">Community.insert
  .name(&quot;AAA&quot;)
  .url(&quot;myUrl&quot;)
  .`type`(&quot;twitter&quot;)
  .orgtype(&quot;personal&quot;)
  .category(&quot;my&quot;, &quot;favorites&quot;) // many cardinality allows multiple values
  .Neighborhood.name(&quot;myNeighborhood&quot;)
  .District.name(&quot;myDistrict&quot;).region(&quot;nw&quot;).save
</code></pre>

<p>We can insert data by building a molecule where we apply a value to each
attribute and then simply save it. Molecule makes sure
that each attribute only accepts values of the expected type (in this
case all attributes expect Strings).</p>

<p>Note also how we easily insert data across several namespaces in one go!</p>

<h3 id="template-molecule-data:e9f2a6d6fbcde0decfe7c5afb620a7be">Template molecule + data</h3>

<p>Normally we would insert bigger data sets that we have exported from
somewhere else. For this scenario we define a molecule where each
attribute match a value at a certain position of our rows of data:</p>

<pre><code class="language-scala">Community.name.url.`type`.orgtype.category
    .Neighborhood.name.District.name.region insert List(
  (&quot;community1&quot;, &quot;url1&quot;, &quot;twitter&quot;, &quot;community&quot;, Set(&quot;cat1&quot;, &quot;cat2&quot;), 
    &quot;NbhName1&quot;, &quot;DistName1&quot;, &quot;e&quot;),
  (&quot;community2&quot;, &quot;url2&quot;, &quot;myspace&quot;, &quot;nonprofit&quot;, Set(&quot;cat3&quot;, &quot;cat1&quot;), 
    &quot;NbhName2&quot;, &quot;DistName2&quot;, &quot;nw&quot;),
  (&quot;community3&quot;, &quot;url3&quot;, &quot;website&quot;, &quot;personal&quot;, Set(&quot;cat1&quot;, &quot;cat2&quot;), 
    &quot;NbhName3&quot;, &quot;DistName3&quot;, &quot;w&quot;),
  // etc..
)
</code></pre>

<h3 id="missing-values-null-values:e9f2a6d6fbcde0decfe7c5afb620a7be">Missing values (&ldquo;Null values&rdquo;)</h3>

<p>We might have some &ldquo;rows&rdquo; (tuples) of imported data with a missing attribute
value. If for instance some row has no <code>orgtype</code> value in the data set, we can
just use a <code>null</code> placeholder:</p>

<pre><code class="language-scala">  (&quot;community4&quot;, &quot;url2&quot;, &quot;blog&quot;, null, Set(&quot;cat3&quot;, &quot;cat1&quot;), &quot;NbhName4&quot;, &quot;DistName4&quot;, &quot;ne&quot;), // ...
</code></pre>

<p>In an sql table we would &ldquo;insert a null value&rdquo; for such column. But with
Molecule/Datomic we just simply don&rsquo;t assert any <code>orgtype</code> value for that
entity at all! In other words: there is no <code>orgtype</code> fact to be saved.</p>

<h3 id="type-safety:e9f2a6d6fbcde0decfe7c5afb620a7be">Type safety</h3>

<p>In this example we have only inserted text strings. But all input is type
checked against the selected attributes of the molecule which makes the
insert operation type safe. We even infer the expected type so that our
IDE will bark if it finds for instance an Integer somewhere in our input data:</p>

<pre><code class="language-scala">  (&quot;community2&quot;, &quot;url2&quot;, &quot;type2&quot;, 42, Set(&quot;cat3&quot;, &quot;cat1&quot;), &quot;NbhName2&quot;, &quot;DistName2&quot;, &quot;DistReg2&quot;), // ...
</code></pre>

<p>A data set having the value <code>42</code> as a value for the <code>orgtype</code> attribute
won&rsquo;t compile and our IDE will warn us of an invalid data set.</p>

</div>

     
  </div> 
</div> 



<script type="text/javascript" src="/js/jquery-1.11.2.min.js"></script>



<script type="text/javascript" src="/js/bootstrap.min.js"></script>



<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/scripts.js"></script>




<script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2787756-3', 'auto');
  ga('send', 'pageview');

</script>
    
</body>
</html>