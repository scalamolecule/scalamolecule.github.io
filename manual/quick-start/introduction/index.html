<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
    <link href='http://fonts.googleapis.com/css?family=Merriweather+Sans:400,300,300italic,400italic,700,700italic,800,800italic'
          rel='stylesheet' type='text/css'>
    <title>Introduction</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/highlight/styles/solarized_light.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link href="/css/style.css" rel="stylesheet">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon-57-precomposed.png">
    <link href="" rel="alternate" type="application/rss+xml" title="Molecule"/>
</head>
<body>


<header class="bs-docs-header">
    <div class="container">
        <div class="col-md-12 column" style="padding-left:0px; padding-right:0px; margin-bottom:15px">
            <div class="col-md-10 column" style="padding-left:0px;height:50px;">

    <ul class="nav nav-pills">
        <li><a href="/" style="padding-left: 6px; padding-right: 13px; vertical-align: top; margin-top: 2px;"><img
                src="/img/logo/MoleculeLogo600.png" alt="" width="200"></a></li>
        
        
        
        <li class="dropdown ">
            <a data-toggle="dropdown" href="/compare/" target="_top"
               onclick="javascript:top.location = '\/compare\/';return true;">Compare</a>
            
            <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
                
                
                
                

                
                <li><a href="/compare/datomic/">Datomic</a></li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/compare/sql/">SQL</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/compare/sql/slick/">Slick</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li><a href="/compare/gremlin/">Gremlin</a></li>
                

                
                
            </ul>
            
        </li>
        
        
        <li class="dropdown ">
            <a data-toggle="dropdown" href="/resources/" target="_top"
               onclick="javascript:top.location = '\/resources\/';return true;">Resources</a>
            
            <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
                
                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/resources/tutorials/">Tutorials</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/resources/tutorials/seattle/">Seattle</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/resources/videos/">Videos</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/resources/videos/2017-04-25_Marc_Grue/">Molecule presentation</a></li>
                        
                    </ul>
                </li>
                

                
                
            </ul>
            
        </li>
        
        
        <li class="dropdown active">
            <a data-toggle="dropdown" href="/manual/" target="_top"
               onclick="javascript:top.location = '\/manual\/';return true;">Manual</a>
            
            <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
                
                

                
                <li class="dropdown-submenu">
                    <a href="/manual/">Quick start</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/manual/quick-start/introduction/">Introduction</a></li>
                        
                        <li><a href="/manual/quick-start/performance/">Performance</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li><a href="/manual/setup/">Setup</a></li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/manual/schema/">Schema</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/manual/schema/transaction/">Transaction</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/manual/attributes/">Attributes</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/manual/attributes/basics/">Building molecules</a></li>
                        
                        <li><a href="/manual/attributes/modes/">Mandatory/Tacit/Optional</a></li>
                        
                        <li><a href="/manual/attributes/mapped/">Map attributes</a></li>
                        
                        <li><a href="/manual/attributes/expressions/">Expressions</a></li>
                        
                        <li><a href="/manual/attributes/aggregates/">Aggregates</a></li>
                        
                        <li><a href="/manual/attributes/parameterized/">Parameterized</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li><a href="/manual/entities/">Entities</a></li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/manual/relationships/">Relationships</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/manual/relationships/card-one/">Cardinality one</a></li>
                        
                        <li><a href="/manual/relationships/card-many/">Cardinality many</a></li>
                        
                        <li><a href="/manual/relationships/composites/">Composites</a></li>
                        
                        <li><a href="/manual/relationships/bidirectional/">Bidirectional</a></li>
                        
                        <li><a href="/manual/relationships/self-join/">Self-join</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/manual/crud/">&#34;CRUD&#34;</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/manual/crud/save/">Save</a></li>
                        
                        <li><a href="/manual/crud/insert/">Insert</a></li>
                        
                        <li><a href="/manual/crud/get/">Get</a></li>
                        
                        <li><a href="/manual/crud/get-json/">Get Json</a></li>
                        
                        <li><a href="/manual/crud/update/">Update</a></li>
                        
                        <li><a href="/manual/crud/retract/">Retract</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/manual/transactions/">Transactions</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/manual/transactions/tx-bundle/">Tx bundle</a></li>
                        
                        <li><a href="/manual/transactions/tx-functions/">Tx functions</a></li>
                        
                        <li><a href="/manual/transactions/tx-meta-data/">Tx meta data</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/manual/time/">Time</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/manual/time/asof-since/">AsOf/Since</a></li>
                        
                        <li><a href="/manual/time/history/">History</a></li>
                        
                        <li><a href="/manual/time/with/">With</a></li>
                        
                        <li><a href="/manual/time/testing/">Testing</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/manual/generic/">Generic</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/manual/generic/datom/">Datom</a></li>
                        
                        <li><a href="/manual/generic/indexes/">Indexes</a></li>
                        
                        <li><a href="/manual/generic/log/">Log</a></li>
                        
                        <li><a href="/manual/generic/schema/">Schema</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/manual/debug/">Debug</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/manual/debug/datalog/">Datalog/data</a></li>
                        
                        <li><a href="/manual/debug/debug-transactions/">Transactions</a></li>
                        
                        <li><a href="/manual/debug/err/">Errors</a></li>
                        
                    </ul>
                </li>
                

                
                
            </ul>
            
        </li>
        
        
        <li class="dropdown ">
            <a data-toggle="dropdown" href="/api/molecule" target="_top"
               onclick="javascript:top.location = '\/api\/molecule';return true;">Docs</a>
            
            <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/api">api</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/api/core$.html">core</a></li>
                        
                        <li><a href="/api/molecule/api/Entity.html">Entity</a></li>
                        
                        <li><a href="/api/molecule/api/EntityOps.html">EntityOps</a></li>
                        
                        <li><a href="/api/molecule/api/exception">exception</a></li>
                        
                        <li><a href="/api/molecule/api/get">get</a></li>
                        
                        <li><a href="/api/molecule/api/getAsync">getAsync</a></li>
                        
                        <li><a href="/api/molecule/api/Molecule.html">Molecule</a></li>
                        
                        <li><a href="/api/molecule/api/OptionalMapOps.html">OptionalMapOps</a></li>
                        
                        <li><a href="/api/molecule/api/ShowDebug.html">ShowDebug</a></li>
                        
                        <li><a href="/api/molecule/api/TxMethods.html">TxMethods</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/ast">ast</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/ast/model$.html">model</a></li>
                        
                        <li><a href="/api/molecule/ast/MoleculeBase.html">MoleculeBase</a></li>
                        
                        <li><a href="/api/molecule/ast/query$.html">query</a></li>
                        
                        <li><a href="/api/molecule/ast/transactionModel$.html">transactionModel</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/boilerplate">boilerplate</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/boilerplate/attributes$.html">attributes</a></li>
                        
                        <li><a href="/api/molecule/boilerplate/base$.html">base</a></li>
                        
                        <li><a href="/api/molecule/boilerplate/dummyTypes$.html">dummyTypes</a></li>
                        
                        <li><a href="/api/molecule/boilerplate/in1$.html">in1</a></li>
                        
                        <li><a href="/api/molecule/boilerplate/in2$.html">in2</a></li>
                        
                        <li><a href="/api/molecule/boilerplate/in3$.html">in3</a></li>
                        
                        <li><a href="/api/molecule/boilerplate/out$.html">out</a></li>
                        
                        <li><a href="/api/molecule/boilerplate/outIndex$.html">outIndex</a></li>
                        
                        <li><a href="/api/molecule/boilerplate/outSchema$.html">outSchema</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/composition">composition</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/composition/Composite.html">Composite</a></li>
                        
                        <li><a href="/api/molecule/composition/Composite_In_1.html">Composite_In_1</a></li>
                        
                        <li><a href="/api/molecule/composition/Composite_In_2.html">Composite_In_2</a></li>
                        
                        <li><a href="/api/molecule/composition/Composite_In_3.html">Composite_In_3</a></li>
                        
                        <li><a href="/api/molecule/composition/CompositeInit.html">CompositeInit</a></li>
                        
                        <li><a href="/api/molecule/composition/CompositeInit_In_1.html">CompositeInit_In_1</a></li>
                        
                        <li><a href="/api/molecule/composition/CompositeInit_In_2.html">CompositeInit_In_2</a></li>
                        
                        <li><a href="/api/molecule/composition/CompositeInit_In_3.html">CompositeInit_In_3</a></li>
                        
                        <li><a href="/api/molecule/composition/Nested.html">Nested</a></li>
                        
                        <li><a href="/api/molecule/composition/Nested_In_1.html">Nested_In_1</a></li>
                        
                        <li><a href="/api/molecule/composition/Nested_In_2.html">Nested_In_2</a></li>
                        
                        <li><a href="/api/molecule/composition/Nested_In_3.html">Nested_In_3</a></li>
                        
                        <li><a href="/api/molecule/composition/Tx.html">Tx</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/exceptions">exceptions</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/exceptions/package$$MoleculeCompileException.html">MoleculeCompileException</a></li>
                        
                        <li><a href="/api/molecule/exceptions/package$$MoleculeException.html">MoleculeException</a></li>
                        
                        <li><a href="/api/molecule/exceptions/package$$QueryException.html">QueryException</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/expression">expression</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/expression/AggregateKeywords.html">AggregateKeywords</a></li>
                        
                        <li><a href="/api/molecule/expression/AggregateKeywordsSchema$.html">AggregateKeywordsSchema</a></li>
                        
                        <li><a href="/api/molecule/expression/AttrExpressions.html">AttrExpressions</a></li>
                        
                        <li><a href="/api/molecule/expression/LogicImplicits.html">LogicImplicits</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/facade">facade</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/facade/Conn.html">Conn</a></li>
                        
                        <li><a href="/api/molecule/facade/Datomic.html">Datomic</a></li>
                        
                        <li><a href="/api/molecule/facade/exception">exception</a></li>
                        
                        <li><a href="/api/molecule/facade/TxReport.html">TxReport</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/factory">factory</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/factory/Composite_Factory2.html">Composite_Factory2</a></li>
                        
                        <li><a href="/api/molecule/factory/Composite_In_1_Factory2.html">Composite_In_1_Factory2</a></li>
                        
                        <li><a href="/api/molecule/factory/Composite_In_2_Factory2.html">Composite_In_2_Factory2</a></li>
                        
                        <li><a href="/api/molecule/factory/Composite_In_3_Factory2.html">Composite_In_3_Factory2</a></li>
                        
                        <li><a href="/api/molecule/factory/Molecule_Factory2.html">Molecule_Factory2</a></li>
                        
                        <li><a href="/api/molecule/factory/Molecule_In_1_Factory2.html">Molecule_In_1_Factory2</a></li>
                        
                        <li><a href="/api/molecule/factory/Molecule_In_2_Factory2.html">Molecule_In_2_Factory2</a></li>
                        
                        <li><a href="/api/molecule/factory/Molecule_In_3_Factory2.html">Molecule_In_3_Factory2</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/generic">generic</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/generic/datom/index.html">datom</a></li>
                        
                        <li><a href="/api/molecule/generic/index/index.html">index</a></li>
                        
                        <li><a href="/api/molecule/generic/Log.html">Log</a></li>
                        
                        <li><a href="/api/molecule/generic/schema/index.html">schema</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/input">input</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/input/exception">exception</a></li>
                        
                        <li><a href="/api/molecule/input/InputMolecule.html">InputMolecule</a></li>
                        
                        <li><a href="/api/molecule/input/InputMolecule_1.html">InputMolecule_1</a></li>
                        
                        <li><a href="/api/molecule/input/InputMolecule_2.html">InputMolecule_2</a></li>
                        
                        <li><a href="/api/molecule/input/InputMolecule_3.html">InputMolecule_3</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/macros">macros</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/macros/MakeComposite.html">MakeComposite</a></li>
                        
                        <li><a href="/api/molecule/macros/MakeComposite_In.html">MakeComposite_In</a></li>
                        
                        <li><a href="/api/molecule/macros/MakeMolecule.html">MakeMolecule</a></li>
                        
                        <li><a href="/api/molecule/macros/MakeMolecule_In.html">MakeMolecule_In</a></li>
                        
                        <li><a href="/api/molecule/macros/TxFns.html">TxFns</a></li>
                        
                        <li><a href="/api/molecule/macros/TxFunctionCall.html">TxFunctionCall</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/ops">ops</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/ops/ModelOps$.html">ModelOps</a></li>
                        
                        <li><a href="/api/molecule/ops/QueryOps$.html">QueryOps</a></li>
                        
                        <li><a href="/api/molecule/ops/VerifyModel.html">VerifyModel</a></li>
                        
                        <li><a href="/api/molecule/ops/VerifyRawModel$.html">VerifyRawModel</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/schema">schema</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/schema/definition$.html">definition</a></li>
                        
                        <li><a href="/api/molecule/schema/SchemaTransaction.html">SchemaTransaction</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/transform">transform</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/transform/CastHelpers.html">CastHelpers</a></li>
                        
                        <li><a href="/api/molecule/transform/Model2Query$.html">Model2Query</a></li>
                        
                        <li><a href="/api/molecule/transform/Model2Transaction.html">Model2Transaction</a></li>
                        
                        <li><a href="/api/molecule/transform/Query2String.html">Query2String</a></li>
                        
                    </ul>
                </li>
                

                
                
                

                
                <li class="dropdown-submenu">
                    <a href="/api/molecule/util">util</a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/api/molecule/util/BridgeDatomicFuture.html">BridgeDatomicFuture</a></li>
                        
                        <li><a href="/api/molecule/util/DateHandling.html">DateHandling</a></li>
                        
                        <li><a href="/api/molecule/util/fns$.html">fns</a></li>
                        
                        <li><a href="/api/molecule/util/Helpers.html">Helpers</a></li>
                        
                        <li><a href="/api/molecule/util/JavaUtil.html">JavaUtil</a></li>
                        
                        <li><a href="/api/molecule/util/RegexMatching.html">RegexMatching</a></li>
                        
                    </ul>
                </li>
                

                
                
            </ul>
            
        </li>
        
        
        <li class="dropdown ">
            <a data-toggle="dropdown" href="/dev/" target="_top"
               onclick="javascript:top.location = '\/dev\/';return true;">Dev</a>
            
            <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
                
                

                
                <li><a href="/dev/">Developer</a></li>
                

                
                
                

                
                <li><a href="/dev/boilerplate/">Boilerplate</a></li>
                

                
                
                

                
                <li><a href="/dev/transformation/">Transformation</a></li>
                

                
                
            </ul>
            
        </li>
        
        
        <li class="dropdown ">
            <a data-toggle="dropdown" href="/community/" target="_top"
               onclick="javascript:top.location = '\/community\/';return true;">Community</a>
            
            <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
                
                
                
                

                
                <li><a href="https://gitter.im/scalamolecule/Lobby">Gitter</a></li>
                

                
                
                

                
                <li><a href="https://groups.google.com/forum/#!forum/molecule-dsl">Forum</a></li>
                

                
                
                

                
                <li><a href="https://github.com/scalamolecule/molecule">Github</a></li>
                

                
                
                

                
                <li><a href="https://github.com/scalamolecule/molecule/issues">Molecule issues</a></li>
                

                
                
                

                
                <li><a href="https://github.com/scalamolecule/molecule-web/issues">Molecule docs issues</a></li>
                

                
                
            </ul>
            
        </li>
        
        <li>
            
        </li>
    </ul>

</div>

            <div class="col-md-2 column" style="padding-top:20px;padding-right:0px;">
                <ul class="nav nav-pills" style="float:right;">
                    <li>
                        <a href="/changelog" style="margin-top:-2px;">v0.22.5</a>
                    </li>
                    <li>
                        <div style="padding-left:14px;">
                            <a href="https://github.com/scalamolecule/molecule" class="github-button"
                               data-icon="octicon">Github</a>
                        </div>
                    </li>
                </ul>
            </div>

        </div>

    </div>
</header>

<div class="wrapper">
    
     

<div class="container" style="padding-top:20px">

    <div class="col-sm-10 column" style="padding-left:8px;">
        <h1 id="molecule-introduction">Molecule introduction</h1>
<p>Molecule let&rsquo;s you model and query your domain data structures directly with the words of your domain.</p>
<h3 id="query">Query</h3>
<p>Let&rsquo;s say we want to find Persons in the Datomic database. Then we can build a molecule to get this data
for us:</p>
<pre><code>val persons: List[(String, Int)] = m(Person.name.age).get
</code></pre><p>This fetches a List of tuples of Strings/Int&rsquo;s that are the types of the <code>name</code> and <code>age</code> Attributes that
we asked for. We can continue adding more and more Attributes as with the builder pattern to define what data
we are interested in.</p>
<p>There are 5 different getters that return data in various formats and all synchronous getters have an
asynchronous equivalent getter. See <a href="/manual/attributes/basics">Building molecules</a> for more info on
getters.</p>
<h3 id="building-blocks">Building blocks</h3>
<p>Attributes are atomic pieces of information that are prefixed by a Namespace, in this case <code>Person</code>. Namespaces
are not like SQL tables but just a common meaningful prefix to Attributes that have something in common.</p>
<p>The <code>m</code> method (for **<em>m</em>**olecule) is an implicit macro method in the Molecule library that consumes the
data structure that we have modelled with our custom DSL and produces a molecule. We can then for instance
call <code>get</code> on the molecule to fetch data from Datomic that matches the data structure of the molecule.
Since the <code>m</code> method is implicit we can simply write</p>
<pre><code>val persons = Person.name.age.get
</code></pre><p>That way, we can use our domain terms directly in our code in a type-safe and semantically meaningful way to
communicate with our Datomic database. Since we are working with auto-generated boilerplate code for
our domain terms, our IDE can help us infer the type of each of our molecules and prevents us from making
any invalid queries.</p>
<h3 id="operations-on-molecules">Operations on molecules</h3>
<p>For single entities we can apply data to the attributes of a molecule and then save it:</p>
<pre><code>// Save Lisa entity and retrieve new entity id
val lisaId = Person.name(&quot;Lisa&quot;).age(&quot;27&quot;).save.eid
</code></pre><p>Or we can add data for multiple entities with an <code>insert</code>:</p>
<pre><code>// Save Lisa entity and retrieve new entity id
Person.name.age insert List(
  (&quot;Lisa&quot;, 27), // Inserting Lisa entity
  (&quot;John&quot;, 32)  // Inserting John entity  
)
</code></pre><p>Using an entity id we can update attribute values of an entity:</p>
<pre><code>// Update age attribute value of Lisa entity
Person(lisaId).age(&quot;28&quot;).update
</code></pre><p>In Datomic, an update is actually a retraction of the old data and an assertion of the new data. In this example,
Lisa&rsquo;s age 27 is retracted and her new age 28 asserted. With this information model, Datomic allow us to go
back in time and see when Lisa&rsquo;s age was changed to 28.</p>
<p>Or we can retract an entity entirely by calling <code>retract</code> on an entity id</p>
<pre><code>// Retract (&quot;delete&quot;) Lisa entity
lisaId.retract
</code></pre><p>Since the entity is retracted and not deleted, Datomic allow us to go back in time before the retraction
to see that Lisa existed.</p>
<h3 id="expressive-powers">Expressive powers</h3>
<p>We can apply conditional values, ranges etc to our molecules to express more subtle data structures:</p>
<pre><code>Community.name.`type`(&quot;twitter&quot; or &quot;facebook_page&quot;)
  .Neighborhood.District.region(&quot;sw&quot; or &quot;s&quot; or &quot;se&quot;)
</code></pre><p>which will find &ldquo;names of twitter/facebook_page communities in neighborhoods of southern districts&rdquo;.</p>
<h2 id="datomic-and-molecule">Datomic and Molecule</h2>
<p>Molecule is a domain-tailored abstraction layer on top of the <a href="https://www.datomic.com">Datomic database</a>. It can therefore be good to know
a little about Datomic in order to understand Molecule.</p>
<h3 id="factsdatoms-with-time-built-in">Facts/Datoms with time built in</h3>
<p>Instead of mapping objects to tables or documents, the core unit of data in Datomic is an atomic piece of
information: a <em>Datom</em>. A Datom describes a <em>fact</em>, for instance that &ldquo;John likes pizza&rdquo;. A timestamp
adds information about <em>when</em> John stated that he likes pizza. A fifth piece of information &ldquo;added&rdquo; tells
if the fact is asserted (true - John likes) or retracted (false - John no longer likes). So, a Datom
consists of 5 pieces of information:</p>
<pre><code> John     likes    pizza      12:35:54       true
   |        |        |           |            |
Entity  Attribute  Value  Transaction/time  Added
</code></pre><p>With Molecule we could model asserting the fact like this:</p>
<pre><code>val txTime = Person(johnId).likes(&quot;pizza&quot;).update.txInstant
</code></pre><p><em>likes</em> is an <code>attribute</code> with <code>value</code> <em>pizza</em>. It is <strong>asserted</strong> that the <code>entity</code> <em>johnId</em> likes pizza
at <code>transaction</code> time 12:35:54. A timestamp is automatically set with all transactions. But if we need
&ldquo;domain time&rdquo; we could add such attribute to the transaction as well, since this is simply a saved data structure
in Datomic as our domain data (more on <a href="/manual/transactions/tx-meta-data">&ldquo;transaction meta data&rdquo;</a>)</p>
<p>As you saw, Molecule simply models Datomic datoms by chaining together <em>attributes</em> to form &ldquo;<em>molecules</em>&rdquo; in unlimited
combinations suiting your domain. You can then call different operations on a molecule as we saw above in order to
interact with the underlying Datomic database.</p>
<h3 id="immutable-data">Immutable data</h3>
<p>Everytime a fact is asserted the old value of the attribute is <em>not deleted</em>. Data is only appended to a Datomic database, and
an update of an attribute value internally creates a retraction of the old value and an assertion of the new value.
In this way, we can <a href="/manual/time/asof-since">go back in time</a> and see the values of an attribute <em>at any point in time</em>. We could for instance see all
our previous addresses if this was part of our domain model.</p>
<p>Also when we delete data, it&rsquo;s actually not deleted, but &ldquo;retracted&rdquo;. Retracted data doesn&rsquo;t show up when we are
querying the current database. But if we look at the database at an earlier point in time we can see the data
before it got retracted.</p>
<h3 id="namespaces-and-attributes">Namespaces and attributes</h3>
<p>In Molecule, <code>attributes</code> are organized in <code>namespaces</code> to group related qualities of our domain:</p>
<p><img src="/img/DatomicElements1.png" alt=""></p>
<h3 id="entity--row-in-an-sql-table">Entity != row in an sql Table</h3>
<p>An <code>entity</code> can have <em>any</em> <code>attribute</code> from <em>any</em> <code>namespace</code> associated to it:</p>
<p><img src="/img/DatomicElements2.png" alt=""></p>
<p>An entity is therefore not like a row in a table but rather a &ldquo;cross-cutting&rdquo; thing that we can freely associate
any attribute value to. Note how &ldquo;attrB1&rdquo; in this example is not associated to entity1.</p>
<h3 id="next">Next&hellip;</h3>
<p><a href="/manual/setup/">Setup molecule</a></p>

    </div>

    <div class="col-sm-2 column" style="padding-left:20px;padding-top:22px;padding-right: 0px;">
        <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm ">

  <div style="position:absolute;top: 15px; left: 0px;">
    
    <a class="navigation-control up" href="/manual/" style="position:absolute; top:0px; left: 56px">
      <span class="glyphicon glyphicon-chevron-up"></span>
    </a>
    
    
    <a class="navigation-control left" href="/manual/" style="position:absolute; top: 15px; left: 20px">
      <span class="glyphicon glyphicon-chevron-left"></span>
    </a>
    
    
    <a class="navigation-control right" href="/manual/quick-start/performance" style="position:absolute; top: 15px; left: 89px">
      <span class="glyphicon glyphicon-chevron-right"></span>
    </a>
    
    
    <a class="navigation-control right" href="/manual/setup" style="position:absolute; top: 30px; left: 54px;">
      <span class="glyphicon glyphicon-chevron-down"></span>
    </a>
    
  </div>

  <ul class="bs-docs-sidenav">
    
    
    
    
    <li><a href="/manual/">Quick start</a></li>
    
    <ul class="level2">
      
      <li class="active"><b>Introduction</b></li>
      
      
      
      <li><a href="/manual/quick-start/performance/">Performance</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/manual/setup/">Setup</a></li>
    
    
    
    
    <li><a href="/manual/schema/">Schema</a></li>
    
    <ul class="level2">
      
      <li><a href="/manual/schema/transaction/">Transaction</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/manual/attributes/">Attributes</a></li>
    
    <ul class="level2">
      
      <li><a href="/manual/attributes/basics/">Building molecules</a></li>
      
      
      
      <li><a href="/manual/attributes/modes/">Mandatory/Tacit/Optional</a></li>
      
      
      
      <li><a href="/manual/attributes/mapped/">Map attributes</a></li>
      
      
      
      <li><a href="/manual/attributes/expressions/">Expressions</a></li>
      
      
      
      <li><a href="/manual/attributes/aggregates/">Aggregates</a></li>
      
      
      
      <li><a href="/manual/attributes/parameterized/">Parameterized</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/manual/entities/">Entities</a></li>
    
    
    
    
    <li><a href="/manual/relationships/">Relationships</a></li>
    
    <ul class="level2">
      
      <li><a href="/manual/relationships/card-one/">Cardinality one</a></li>
      
      
      
      <li><a href="/manual/relationships/card-many/">Cardinality many</a></li>
      
      
      
      <li><a href="/manual/relationships/composites/">Composites</a></li>
      
      
      
      <li><a href="/manual/relationships/bidirectional/">Bidirectional</a></li>
      
      
      
      <li><a href="/manual/relationships/self-join/">Self-join</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/manual/crud/">&#34;CRUD&#34;</a></li>
    
    <ul class="level2">
      
      <li><a href="/manual/crud/save/">Save</a></li>
      
      
      
      <li><a href="/manual/crud/insert/">Insert</a></li>
      
      
      
      <li><a href="/manual/crud/get/">Get</a></li>
      
      
      
      <li><a href="/manual/crud/get-json/">Get Json</a></li>
      
      
      
      <li><a href="/manual/crud/update/">Update</a></li>
      
      
      
      <li><a href="/manual/crud/retract/">Retract</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/manual/transactions/">Transactions</a></li>
    
    <ul class="level2">
      
      <li><a href="/manual/transactions/tx-bundle/">Tx bundle</a></li>
      
      
      
      <li><a href="/manual/transactions/tx-functions/">Tx functions</a></li>
      
      
      
      <li><a href="/manual/transactions/tx-meta-data/">Tx meta data</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/manual/time/">Time</a></li>
    
    <ul class="level2">
      
      <li><a href="/manual/time/asof-since/">AsOf/Since</a></li>
      
      
      
      <li><a href="/manual/time/history/">History</a></li>
      
      
      
      <li><a href="/manual/time/with/">With</a></li>
      
      
      
      <li><a href="/manual/time/testing/">Testing</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/manual/generic/">Generic</a></li>
    
    <ul class="level2">
      
      <li><a href="/manual/generic/datom/">Datom</a></li>
      
      
      
      <li><a href="/manual/generic/indexes/">Indexes</a></li>
      
      
      
      <li><a href="/manual/generic/log/">Log</a></li>
      
      
      
      <li><a href="/manual/generic/schema/">Schema</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/manual/debug/">Debug</a></li>
    
    <ul class="level2">
      
      <li><a href="/manual/debug/datalog/">Datalog/data</a></li>
      
      
      
      <li><a href="/manual/debug/debug-transactions/">Transactions</a></li>
      
      
      
      <li><a href="/manual/debug/err/">Errors</a></li>
      
      
    </ul>
    
    
    
    
    
  </ul>
</nav>
    </div>

</div> 

     
   
 
<div class="push"></div>
</div> 

<footer class="bs-docs-footer">

  <div class="container">
    <ul class="bs-docs-footer-links">
      <li style="vertical-align: top; margin-top: 0px;"><a href="/front/"><img src="/img/logo/MoleculeLogo200.png" alt=""></a></li>
      <li><a href="https://github.com/scalamolecule/molecule">GitHub</a></li>
      <li><a href="https://github.com/scalamolecule/molecule-web">GitHub-web</a></li>
      <li><a href="https://groups.google.com/forum/#!forum/molecule-dsl">Forum</a></li>
      <li><a href="/about/">About</a></li>
      <li><a href="/credits/">Credits</a></li>
    </ul>
    <p>Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="license">Apache License 2.0</a></p>
  </div>
</footer>


<script type="text/javascript" src="/js/jquery-1.11.2.min.js"></script>



<script type="text/javascript" src="/js/bootstrap.min.js"></script>



<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/scripts.js"></script>




<script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2787756-3', 'auto');
  ga('send', 'pageview');
</script>
    
</body>
</html>
