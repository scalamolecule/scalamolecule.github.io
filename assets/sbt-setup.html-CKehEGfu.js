import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,d as i,o as n}from"./app-DWIbxJ49.js";const l={};function t(p,s){return n(),e("div",null,[...s[0]||(s[0]=[i(`<h1 id="sbt-setup" tabindex="-1"><a class="header-anchor" href="#sbt-setup"><span>SBT setup</span></a></h1><p>Molecule uses the sbt <a href="https://github.com/scalamolecule/sbt-molecule" target="_blank" rel="noopener noreferrer">MoleculePlugin</a> to generate boilerplate code that enables you to write molecules.</p><p>Add the latest version of the plugin in <code>project/plugins.sbt</code>:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">addSbtPlugin(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;org.scalamolecule&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;sbt-molecule&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;1.21.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Enable the plugin in your <code>build.sbt</code> file and import the molecule library that corresponds to the database(s) that you will use:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">lazy</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> app</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> project</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .enablePlugins(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MoleculePlugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .settings(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      libraryDependencies ++= </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // One or more database-specific imports</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;org.scalamolecule&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> %% </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;molecule-db-h2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;0.26.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;org.scalamolecule&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> %% </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;molecule-db-mariadb&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;0.26.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;org.scalamolecule&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> %% </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;molecule-db-mysql&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;0.26.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;org.scalamolecule&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> %% </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;molecule-db-postgres&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;0.26.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;org.scalamolecule&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> %% </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;molecule-db-sqlite&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;0.26.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    )</span></span></code></pre></div><p>Use <code>%%%</code> instead of <code>%%</code> for cross-compiled Scala.js projects.</p><p>Define a <a href="/database/setup/domain-structure">Domain Structure</a> and then run</p><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sbt moleculeGen</span></span></code></pre></div><p>That&#39;s it.</p><p>The MoleculePlugin will generate a minimal set of boilerplate code for your domain(s).</p><h2 id="what-is-generated" tabindex="-1"><a class="header-anchor" href="#what-is-generated"><span>What is generated?</span></a></h2><p>Molecule automatically scans your project (with ScalaMeta) to find DomainStructure definitions and generate boilerplate for those.</p><p>Say that you have two domain structure definitions Foo and Bar here:</p><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>src</span></span>
<span class="line"><span>└── main</span></span>
<span class="line"><span>    └── scala</span></span>
<span class="line"><span>        └── app</span></span>
<span class="line"><span>            └── Bar.scala</span></span>
<span class="line"><span>            └── Foo.scala</span></span></code></pre></div><p>Then the plugin will for each domain generate</p><ul><li>SQL schemas to create SQL databases and</li><li>DSL code to build molecules</li></ul><h3 id="sql-schemas" tabindex="-1"><a class="header-anchor" href="#sql-schemas"><span>SQL schemas</span></a></h3><p>SQL schema files for each available database are generated in the resources folder under the <code>moleculeGen</code> namespace to isolate them from other resources:</p><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>src</span></span>
<span class="line"><span>└── main</span></span>
<span class="line"><span>    ├── resources</span></span>
<span class="line"><span>    │   └── moleculeGen</span></span>
<span class="line"><span>    │       └── app</span></span>
<span class="line"><span>    │           ├── Bar</span></span>
<span class="line"><span>    │           │   ├── Bar_h2.sql</span></span>
<span class="line"><span>    │           │   ├── Bar_mariadb.sql</span></span>
<span class="line"><span>    │           │   ├── Bar_mysql.sql</span></span>
<span class="line"><span>    │           │   ├── Bar_postgresql.sql</span></span>
<span class="line"><span>    │           │   └── Bar_sqlite.sql</span></span>
<span class="line"><span>    │           └── Foo</span></span>
<span class="line"><span>    │               ├── Foo_h2.sql</span></span>
<span class="line"><span>    │               ├── Foo_mariadb.sql</span></span>
<span class="line"><span>    │               ├── Foo_mysql.sql</span></span>
<span class="line"><span>    │               ├── Foo_postgresql.sql</span></span>
<span class="line"><span>    │               └── Foo_sqlite.sql</span></span>
<span class="line"><span>    └── scala</span></span>
<span class="line"><span>        └── app</span></span>
<span class="line"><span>            ├── Bar.scala</span></span>
<span class="line"><span>            └── Foo.scala</span></span></code></pre></div><h3 id="dsl-code" tabindex="-1"><a class="header-anchor" href="#dsl-code"><span>DSL code</span></a></h3><p>Boilerplate DSL code is generated in <code>target/scala-3.7.3/src_managed/main/moleculeGen</code>. Managed source code there is not supposed to be modified since it will be overwritten on each new generation with <code>sbt moleculeGen</code>. But you can inspect the code as normal code if you like. The following files are generated:</p><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>moleculeGen</span></span>
<span class="line"><span>└── app</span></span>
<span class="line"><span>    └── dsl</span></span>
<span class="line"><span>        ├── Bar</span></span>
<span class="line"><span>        │   ├── Address.scala   // Address entry point</span></span>
<span class="line"><span>        │   ├── Person.scala    // Person entry point</span></span>
<span class="line"><span>        │   ├── metadb</span></span>
<span class="line"><span>        │   │   ├── Bar_.scala</span></span>
<span class="line"><span>        │   │   ├── Bar_h2.scala</span></span>
<span class="line"><span>        │   │   ├── Bar_mariadb.scala</span></span>
<span class="line"><span>        │   │   ├── Bar_mysql.scala</span></span>
<span class="line"><span>        │   │   ├── Bar_postgresql.scala</span></span>
<span class="line"><span>        │   │   └── Bar_sqlite.scala</span></span>
<span class="line"><span>        │   └── ops</span></span>
<span class="line"><span>        │       ├── Address_.scala   // Address operations</span></span>
<span class="line"><span>        │       └── Person_.scala    // Person operations</span></span>
<span class="line"><span>        └── Foo</span></span>
<span class="line"><span>            // Same as for Bar...</span></span></code></pre></div><p>In the <a href="/database/setup/domain-structure">domain structure</a> for the domain <code>Bar</code>, two entities <code>Person</code> and <code>Address</code> have been defined. These are the starting point for building molecules:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> app.dsl.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Bar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.*</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name.age. </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// etc...</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Address</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.street.zip. </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// etc...</span></span></code></pre></div><h2 id="make-jars" tabindex="-1"><a class="header-anchor" href="#make-jars"><span>Make jars</span></a></h2><p>Instead of running <code>sbt moleculeGen</code> you can also choose to package the generated code in a source and class jar with</p><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sbt moleculePackage</span></span></code></pre></div><p>This can save time on compiling the generated code on rebuilds. But at the moment IntelliJ can&#39;t infer Scala 3 files correctly in generated source jars (see this <a href="https://youtrack.jetbrains.com/issue/SCL-23157/Source-jar-in-lib-added-as-Classes" target="_blank" rel="noopener noreferrer">IntelliJ issue SCL-23157</a>). So for now, generating sources only with <code>sbt moleculeGen</code> is recommended.</p>`,29)])])}const r=a(l,[["render",t]]),c=JSON.parse('{"path":"/database/setup/sbt-setup.html","title":"SBT setup","lang":"en-US","frontmatter":{"prev":"/database/quick-start","description":"SBT setup Molecule uses the sbt MoleculePlugin to generate boilerplate code that enables you to write molecules. Add the latest version of the plugin in project/plugins.sbt: Ena...","toc":{"levels":[2,3]},"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SBT setup\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-10-01T23:15:53.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://www.scalamolecule.org/intro/database/setup/sbt-setup.html"}],["meta",{"property":"og:site_name","content":"Scala Molecule"}],["meta",{"property":"og:title","content":"SBT setup"}],["meta",{"property":"og:description","content":"SBT setup Molecule uses the sbt MoleculePlugin to generate boilerplate code that enables you to write molecules. Add the latest version of the plugin in project/plugins.sbt: Ena..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-10-01T23:15:53.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-01T23:15:53.000Z"}]]},"git":{"createdTime":1759360553000,"updatedTime":1759360553000,"contributors":[{"name":"marcgrue","username":"marcgrue","email":"marcgrue@gmail.com","commits":1,"url":"https://github.com/marcgrue"}]},"filePathRelative":"database/setup/sbt-setup.md","autoDesc":true}');export{r as comp,c as data};
