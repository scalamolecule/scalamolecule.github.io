import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as g,d as l,e as h,a as s,w as a,r as k,o as y,b as i}from"./app-CZk41djq.js";const c={};function A(o,t){const p=k("CodeTabs"),r=k("RouteLink");return y(),g("div",null,[t[45]||(t[45]=l('<h1 id="plain-sql" tabindex="-1"><a class="header-anchor" href="#plain-sql"><span>Plain SQL</span></a></h1><p>Plain-SQL libraries allow you to write SQL directly, typically through string interpolators or lightweight wrappers, with minimal abstraction.</p><ol><li><a href="#_1-quick-comparison">Quick Comparison</a> - CRUD operations side-by-side</li><li><a href="#_2-environment">Environment</a> - Scala versions, APIs, code generation</li><li><a href="#_3-supported-databases">Supported databases</a> - Database compatibility</li><li><a href="#_4-data-types">Data types</a> - Supported Scala types</li><li><a href="#_5-query">Query</a> - Query features and examples</li><li><a href="#_6-result-parsing">Result parsing</a> - Parsing results to tuples and case classes</li><li><a href="#_7-transaction">Transaction</a> - Transaction features</li><li><a href="#_8-transaction-setup">Transaction setup</a> - How to use transactions</li><li><a href="#_9-when-to-choose-what">When to choose what?</a> - Decision guide</li></ol><h2 id="_1-quick-comparison" tabindex="-1"><a class="header-anchor" href="#_1-quick-comparison"><span>1. Quick Comparison</span></a></h2><p>Here&#39;s a side-by-side comparison of basic operations with Molecule and Doobie:</p>',5)),h(p,{data:[{id:"Query"},{id:"Insert"},{id:"Update"},{id:"Delete"}],"tab-id":"quick"},{title0:a(({value:e,isActive:n})=>[...t[0]||(t[0]=[i("Query",-1)])]),title1:a(({value:e,isActive:n})=>[...t[1]||(t[1]=[i("Insert",-1)])]),title2:a(({value:e,isActive:n})=>[...t[2]||(t[2]=[i("Update",-1)])]),title3:a(({value:e,isActive:n})=>[...t[3]||(t[3]=[i("Delete",-1)])]),tab0:a(({value:e,isActive:n})=>[...t[4]||(t[4]=[s("div",{class:"language-scala","data-highlighter":"shiki","data-ext":"scala",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[s("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[s("code",{class:"language-scala"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"// Molecule - domain model query")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"Person"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},".name.age."),s("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"Address"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},".street.query.get")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"// Plain SQL")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"sql"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"""SELECT p.name, p.age, a.street')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"      FROM person p")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'      JOIN address a ON p.address_id = a.id"""')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"  .query[("),s("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"String"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),s("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"Int"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},", "),s("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"String"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")]")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"  .to["),s("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"List"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"]")])])])],-1)])]),tab1:a(({value:e,isActive:n})=>[...t[5]||(t[5]=[s("div",{class:"language-scala","data-highlighter":"shiki","data-ext":"scala",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[s("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[s("code",{class:"language-scala"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"// Molecule - type-safe insert")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"Person"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},".name("),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"Alice"'),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},").age("),s("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"30"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},").save")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"// Plain SQL")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"sql"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},`"INSERT INTO person(name, age) VALUES ('Alice', 30)"`),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},".update.run")])])])],-1)])]),tab2:a(({value:e,isActive:n})=>[...t[6]||(t[6]=[s("div",{class:"language-scala","data-highlighter":"shiki","data-ext":"scala",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[s("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[s("code",{class:"language-scala"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"// Molecule - update by id")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"Person"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(personId).age("),s("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"31"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},").update")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"// Plain SQL")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"sql"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"UPDATE person SET age = 31 WHERE id = '),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#C678DD"}},"$"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"personId"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},".update.run")])])])],-1)])]),tab3:a(({value:e,isActive:n})=>[...t[7]||(t[7]=[s("div",{class:"language-scala","data-highlighter":"shiki","data-ext":"scala",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[s("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[s("code",{class:"language-scala"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"// Molecule - delete by id")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"Person"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(personId).delete")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"// Plain SQL")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"sql"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"DELETE FROM person WHERE id = '),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#C678DD"}},"$"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"personId"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},".update.run")])])])],-1)])]),_:1}),t[46]||(t[46]=l('<h2 id="_2-environment" tabindex="-1"><a class="header-anchor" href="#_2-environment"><span>2. Environment</span></a></h2><table><thead><tr><th></th><th style="text-align:center;">Molecule</th><th style="text-align:center;"><a href="https://typelevel.org/doobie/index.html" target="_blank" rel="noopener noreferrer">Doobie</a></th><th style="text-align:center;"><a href="https://github.com/AugustNagro/magnum" target="_blank" rel="noopener noreferrer">Magnum</a></th><th style="text-align:center;"><a href="https://typelevel.org/skunk/" target="_blank" rel="noopener noreferrer">Skunk</a></th><th style="text-align:center;"><a href="https://playframework.github.io/anorm/" target="_blank" rel="noopener noreferrer">Anorm</a></th></tr></thead><tbody><tr><td>Scala 3</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Scala 2.13</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Scala 2.12</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Scala JS</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✅ (Node.js)</td><td style="text-align:center;"></td></tr><tr><td>Scala Native</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td></tr><tr><td>Model</td><td style="text-align:center;">runtime</td><td style="text-align:center;">runtime</td><td style="text-align:center;">runtime</td><td style="text-align:center;">runtime</td><td style="text-align:center;">compile</td></tr><tr><td>API</td><td style="text-align:center;">Sync<br>Async<br>ZIO<br>IO</td><td style="text-align:center;">F[_]</td><td style="text-align:center;">Sync</td><td style="text-align:center;">F[_]</td><td style="text-align:center;">Sync</td></tr><tr><td>Underlying api</td><td style="text-align:center;">JDBC</td><td style="text-align:center;">JDBC</td><td style="text-align:center;">JDBC</td><td style="text-align:center;">Postgres wire</td><td style="text-align:center;">JDBC</td></tr><tr><td>Code generation</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✅<br>(macro)</td></tr><tr><td>Repository pattern support</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Db compliance SPI</td><td style="text-align:center;">✅ 1)</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr></tbody></table><ol><li>Molecule guarantees that all supported databases behave identically for the end-user. Each supported database pass the same comprehensive compliance SPI test suite of ~2000 tests.</li></ol><h2 id="_3-supported-databases" tabindex="-1"><a class="header-anchor" href="#_3-supported-databases"><span>3. Supported databases</span></a></h2><table><thead><tr><th></th><th style="text-align:center;">Molecule</th><th style="text-align:center;">Doobie</th><th style="text-align:center;">Magnum</th><th style="text-align:center;">Skunk</th><th style="text-align:center;">Anorm</th></tr></thead><tbody><tr><td>Postgres</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>MySQL</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td>H2</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td>SQLite</td><td style="text-align:center;">✅</td><td style="text-align:center;">✔</td><td style="text-align:center;">✔</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td>MariaDB</td><td style="text-align:center;">✅</td><td style="text-align:center;">✔</td><td style="text-align:center;">✔</td><td style="text-align:center;">❌</td><td style="text-align:center;">✔</td></tr><tr><td>Oracle</td><td style="text-align:center;">-</td><td style="text-align:center;">✔</td><td style="text-align:center;">✔</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td>SQL Server</td><td style="text-align:center;">-</td><td style="text-align:center;">✔</td><td style="text-align:center;">✔</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td>DB2</td><td style="text-align:center;">-</td><td style="text-align:center;">✔</td><td style="text-align:center;">✔</td><td style="text-align:center;">❌</td><td style="text-align:center;">✔</td></tr><tr><td>HSQLDB</td><td style="text-align:center;">-</td><td style="text-align:center;">✔</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td><td style="text-align:center;">✔</td></tr><tr><td>Derby</td><td style="text-align:center;">-</td><td style="text-align:center;">✔</td><td style="text-align:center;">✔</td><td style="text-align:center;">❌</td><td style="text-align:center;">✔</td></tr><tr><td>OrientDB</td><td style="text-align:center;">-</td><td style="text-align:center;">✔</td><td style="text-align:center;">✔</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td>Cassandra</td><td style="text-align:center;">-</td><td style="text-align:center;">✔</td><td style="text-align:center;">✔</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td>Spark</td><td style="text-align:center;">-</td><td style="text-align:center;">✔</td><td style="text-align:center;">✔</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td>Clickhouse</td><td style="text-align:center;">-</td><td style="text-align:center;">✔</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td><td style="text-align:center;">✔</td></tr></tbody></table><p>✅ = Fully supported and tested<br> ✔ = JDBC-compatible; should work<br> - = Can be implemented<br> ❌ = Not supported</p><h2 id="_4-data-types" tabindex="-1"><a class="header-anchor" href="#_4-data-types"><span>4. Data types</span></a></h2>',7)),s("table",null,[t[44]||(t[44]=s("thead",null,[s("tr",null,[s("th"),s("th",{style:{"text-align":"center"}},"Molecule"),s("th",{style:{"text-align":"center"}},"Doobie"),s("th",{style:{"text-align":"center"}},"Magnum"),s("th",{style:{"text-align":"center"}},"Skunk"),s("th",{style:{"text-align":"center"}},"Anorm")])],-1)),s("tbody",null,[t[14]||(t[14]=s("tr",null,[s("td",null,[s("em",null,[s("strong",null,"Scalars")])]),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}})],-1)),t[15]||(t[15]=s("tr",null,[s("td",null,"String"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅")],-1)),t[16]||(t[16]=s("tr",null,[s("td",null,"Int"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅")],-1)),t[17]||(t[17]=s("tr",null,[s("td",null,"Long"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅")],-1)),t[18]||(t[18]=s("tr",null,[s("td",null,"Float"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅")],-1)),t[19]||(t[19]=s("tr",null,[s("td",null,"Double"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅")],-1)),t[20]||(t[20]=s("tr",null,[s("td",null,"Boolean"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅")],-1)),t[21]||(t[21]=s("tr",null,[s("td",null,"BigInt"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}},"✔"),s("td",{style:{"text-align":"center"}})],-1)),t[22]||(t[22]=s("tr",null,[s("td",null,"BigDecimal"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✔"),s("td",{style:{"text-align":"center"}})],-1)),t[23]||(t[23]=s("tr",null,[s("td",null,"Byte"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅")],-1)),t[24]||(t[24]=s("tr",null,[s("td",null,"Short"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅")],-1)),t[25]||(t[25]=s("tr",null,[s("td",null,"Char"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}})],-1)),t[26]||(t[26]=s("tr",null,[s("td",null,"Enum"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}})],-1)),t[27]||(t[27]=s("tr",null,[s("td"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}})],-1)),t[28]||(t[28]=s("tr",null,[s("td",null,[s("em",null,[s("strong",null,"Java types")])]),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}})],-1)),t[29]||(t[29]=s("tr",null,[s("td",null,"java.util.Date"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✔"),s("td",{style:{"text-align":"center"}},"✅")],-1)),t[30]||(t[30]=s("tr",null,[s("td",null,"java.util.UUID"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}})],-1)),t[31]||(t[31]=s("tr",null,[s("td",null,"java.net.URI"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}},"✔"),s("td",{style:{"text-align":"center"}})],-1)),t[32]||(t[32]=s("tr",null,[s("td",null,"java.time.Duration"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}})],-1)),t[33]||(t[33]=s("tr",null,[s("td",null,"java.time.Instant"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✔"),s("td",{style:{"text-align":"center"}})],-1)),t[34]||(t[34]=s("tr",null,[s("td",null,"java.time.LocalDate"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}})],-1)),t[35]||(t[35]=s("tr",null,[s("td",null,"java.time.LocalTime"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}})],-1)),t[36]||(t[36]=s("tr",null,[s("td",null,"java.time.LocalDateTime"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}})],-1)),t[37]||(t[37]=s("tr",null,[s("td",null,"java.time.OffsetTime"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}})],-1)),t[38]||(t[38]=s("tr",null,[s("td",null,"java.time.OffsetDateTime"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}})],-1)),t[39]||(t[39]=s("tr",null,[s("td",null,"java.time.ZonedDateTime"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}},"✔"),s("td",{style:{"text-align":"center"}})],-1)),t[40]||(t[40]=s("tr",null,[s("td"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}})],-1)),s("tr",null,[s("td",null,[s("em",null,[h(r,{to:"/database/query/attributes.html#collection-types"},{default:a(()=>[...t[8]||(t[8]=[i("Collections",-1)])]),_:1})])]),t[9]||(t[9]=s("td",{style:{"text-align":"center"}},null,-1)),t[10]||(t[10]=s("td",{style:{"text-align":"center"}},null,-1)),t[11]||(t[11]=s("td",{style:{"text-align":"center"}},null,-1)),t[12]||(t[12]=s("td",{style:{"text-align":"center"}},null,-1)),t[13]||(t[13]=s("td",{style:{"text-align":"center"}},null,-1))]),t[41]||(t[41]=s("tr",null,[s("td",null,"Set"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}})],-1)),t[42]||(t[42]=s("tr",null,[s("td",null,"Seq"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}})],-1)),t[43]||(t[43]=s("tr",null,[s("td",null,"Map"),s("td",{style:{"text-align":"center"}},"✅"),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}}),s("td",{style:{"text-align":"center"}})],-1))])]),t[47]||(t[47]=l(`<p>✅ = Out-of-the-box available Scala type<br> ✔ = Possible with custom Codec<br></p><h2 id="_5-query" tabindex="-1"><a class="header-anchor" href="#_5-query"><span>5. Query</span></a></h2><table><thead><tr><th>Supported feature</th><th style="text-align:center;">Molecule</th><th style="text-align:center;">Doobie</th><th style="text-align:center;">Magnum</th><th style="text-align:center;">Skunk</th><th style="text-align:center;">Anorm</th></tr></thead><tbody><tr><td>Type-safe query</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Type-safe filtering</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Type-safe result</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td></tr><tr><td>Nested collections</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Joins</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Conditional filters (WHERE)</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Sorting</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Parameterized queries</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Computed expressions</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Group by</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Having</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Window functions</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Set operations (union etc)</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Subqueries</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Fragments/query composition</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td></tr><tr><td></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Offset pagination</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Cursor pagination</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>fs2 streaming</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td></tr><tr><td>ZStream</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Subscription (Pub/Sub)</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td></tr><tr><td></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Tuples returned</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td>Mapping to case class</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr></tbody></table><h4 id="example-query" tabindex="-1"><a class="header-anchor" href="#example-query"><span>Example query</span></a></h4><p>&quot;Departments with more than 2 employees assigned to projects with a budget exceeding 1M&quot;</p><p>Molecule:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Department</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Employees</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.id_(countDistinct).</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).d1.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Projects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.budget_.</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>SQL:</p><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  Department</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DISTINCT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Employee</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) Employee_id_count</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Department</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  INNER JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Employee   </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Department</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Employee</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">department</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  INNER JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Assignment </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Employee</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Assignment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">employee</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  INNER JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Project    </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Assignment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">project</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Project</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  Department</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> IS NOT NULL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  Project</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">budget</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000000</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">GROUP BY</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Department</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">HAVING</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DISTINCT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Employee</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Employee_id_count </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DESC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h2 id="_6-result-parsing" tabindex="-1"><a class="header-anchor" href="#_6-result-parsing"><span>6. Result parsing</span></a></h2><p>Different libraries require different amounts of boilerplate for parsing query results into Scala types.</p><h3 id="parsing-to-tuples" tabindex="-1"><a class="header-anchor" href="#parsing-to-tuples"><span>Parsing to tuples</span></a></h3><p><strong>Molecule</strong> - Automatic mapping with no parser definitions:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name.age.query.get</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Returns List[(String, Int)] automatically</span></span></code></pre></div><p><strong>Doobie</strong> - Type annotation with automatic parsing:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SELECT name, age FROM person&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .query[(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)]  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Type specified, parser inferred</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .to[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre></div><p><strong>Magnum</strong> - Type annotation with automatic parsing:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SELECT name, age FROM person&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .query[(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)]  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Type specified, parser inferred</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .run()</span></span></code></pre></div><p><strong>Skunk</strong> - Explicit codec definition required:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Define decoder with codecs</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> decoder</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (text </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">~</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> int4).map { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (n, a) =&gt; (n, a) }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SELECT name, age FROM person&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .query(decoder)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .stream(...)</span></span></code></pre></div><p><strong>Anorm</strong> - Manual parser definition required:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Define row parser upfront</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> parser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RowParser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SqlParser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.str(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">~</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SqlParser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.int(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;age&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)).map {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    case</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> n </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">~</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a =&gt; (n, a)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SELECT name, age FROM person&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .as(parser.</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h3 id="parsing-to-case-classes" tabindex="-1"><a class="header-anchor" href="#parsing-to-case-classes"><span>Parsing to case classes</span></a></h3><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">age</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p><strong>Molecule</strong> - Automatic mapping with no parser definitions:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name.age.query.get.map(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.tupled)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// or use a custom transformer for direct case class mapping</span></span></code></pre></div><p><strong>Doobie</strong> - Type annotation with automatic parsing:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SELECT name, age FROM person&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .query[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Case class mapping automatic</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .to[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre></div><p><strong>Magnum</strong> - Type annotation with automatic parsing:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SELECT name, age FROM person&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .query[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Case class mapping automatic</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .run()</span></span></code></pre></div><p><strong>Skunk</strong> - Explicit codec definition:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> decoder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Decoder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (text </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">~</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> int4).map {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  case</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (n, a) =&gt; </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(n, a)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SELECT name, age FROM person&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .query(decoder)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .stream(...)</span></span></code></pre></div><p><strong>Anorm</strong> - Manual parser definition:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> parser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RowParser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SqlParser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.str(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">~</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SqlParser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.int(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;age&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)).map {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    case</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> n </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">~</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a =&gt; </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(n, a)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SELECT name, age FROM person&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .as(parser.</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="_7-transaction" tabindex="-1"><a class="header-anchor" href="#_7-transaction"><span>7. Transaction</span></a></h2><table><thead><tr><th></th><th style="text-align:center;">Molecule</th><th style="text-align:center;">Doobie</th><th style="text-align:center;">Magnum</th><th style="text-align:center;">Skunk</th><th style="text-align:center;">Anorm</th></tr></thead><tbody><tr><td><em><strong>Transaction safety <sup>1)</sup></strong></em></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Type-safe structure (entities/attributes)</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Type-safe literal values</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Type-safe interpolated values</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td><em><strong>Transaction management</strong></em></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Automatic rollback on failure</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td></tr><tr><td>Explicit rollback (programmatic)</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td></tr><tr><td>Savepoints</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td></tr><tr><td>Unit of work (batched operations as one tx)</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;">✅</td></tr><tr><td>Connection/resource safety within tx</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;"></td></tr><tr><td></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td><em><strong>Multi-entity operations</strong></em></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Join/table-spanning mutations <sup>2)</sup></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td>Nested hierarchical inserts <sup>3)</sup></td><td style="text-align:center;">✅</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr></tbody></table><ol><li><strong>Transaction safety</strong> - Molecule provides three levels of compile-time type safety:</li></ol><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Alice&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> age</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 30</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Molecule - all three levels of type safety</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ✓ structure, literals, and interpolated values all type-safe</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name(name).age(age).save</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ✗ compile error: invalidAttr doesn&#39;t exist</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.invalidAttr(name).save</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ✗ compile error: String doesn&#39;t match Int type</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name(name).age(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;30&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).save</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Plain SQL - only interpolated values are type-safe</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ✓ interpolated values type-safe</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO person(name, age) VALUES (</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">age</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.update.run</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ✓ compiles, runtime error (invalid column)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO person(name, invalid_col) VALUES (</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">age</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.update.run</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ✓ compiles, runtime error (wrong type)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO person(name, age) VALUES (</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, &#39;30&#39;)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.update.run</span></span></code></pre></div><ol start="2"><li>Update or delete across multiple related entities with joins in a single operation:</li></ol><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Molecule - update employees and their projects in one operation</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name_(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Alice&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).salary(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">130000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Project</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.budget(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1600000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).update</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Plain SQL - requires multiple statements</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;UPDATE project SET budget = 1600000</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      WHERE id IN (SELECT project_id FROM employee WHERE name = &#39;Alice&#39;)&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .update.run</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;UPDATE employee SET salary = 130000 WHERE name = &#39;Alice&#39;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .update.run</span></span></code></pre></div><ol start="3"><li>Insert parent and child entities together in one operation:</li></ol><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Molecule - insert multiple invoices with nested invoice lines in one call</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Invoice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.no.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Lines</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">  InvoiceLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.qty.product.unitPrice.lineTotal</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).insert(</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // Invoice 1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Invoice lines for invoice 1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Socks&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">15</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Bread&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  )),</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // Invoice 2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Knife&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">40</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Bread&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">40</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).transact</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Plain SQL - requires separate inserts with manual foreign key coordination</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // Insert invoice 1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  inv1Id &lt;- </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO invoice(no) VALUES (1) RETURNING id&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">              .query[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].unique</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  _      &lt;- </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;INSERT INTO invoice_line(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    qty, product, unit_price, line_total, invoice_id)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  VALUES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    (2, &#39;Socks&#39;, 15, 30, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">inv1Id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">),</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    (5, &#39;Bread&#39;, 10, 50, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">inv1Id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">              .update.run</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // Insert invoice 2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  inv2Id &lt;- </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO invoice(no) VALUES (2) RETURNING id&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">              .query[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].unique</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  _      &lt;- </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;INSERT INTO invoice_line(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    qty, product, unit_price, line_total, invoice_id)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  VALUES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    (1, &#39;Knife&#39;, 40, 50, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">inv2Id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">),</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    (4, &#39;Bread&#39;, 10, 40, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">inv2Id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">              .update.run</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ()</span></span></code></pre></div><h2 id="_8-transaction-setup" tabindex="-1"><a class="header-anchor" href="#_8-transaction-setup"><span>8. Transaction setup</span></a></h2><p>How to execute multiple operations in a transaction:</p><p><strong>Molecule</strong> - Call <code>.transact</code> on the operation:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">given</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Conn</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Molecule connection</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Single operation</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Alice&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).age(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).save.transact</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Multiple operations within unitOfWork</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">unitOfWork {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> p1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Project</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Project X&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).budget(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).save.transact.id</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">  Employee</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.name.salary.project.insert(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Alice&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, p1),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Bob&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">90000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, p1),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ).transact</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Or, when no coordination is needed:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">transact(</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">  Entity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.int(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).save,         </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// List(1)</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">  Entity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.int.insert(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),    </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// List(1, 2, 3)</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">  Entity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).delete,           </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// List(2, 3)</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">  Entity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).int.</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).update, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// List(2, 30)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p><strong>Doobie</strong> - Build a <code>ConnectionIO</code> and call <code>.transact(xa)</code>:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> xa</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Transactor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Doobie transactor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Single operation</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO person(name, age) VALUES (&#39;Alice&#39;, 30)&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .update.run.transact(xa)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Multiple operations in a transaction</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> program</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ConnectionIO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Unit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  p1 &lt;- </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;INSERT INTO project(name, budget)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              VALUES (&#39;Project X&#39;, 100000)&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          .update.withUniqueGeneratedKeys[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  _  &lt;- </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;INSERT INTO employee(name, salary, project_id)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              VALUES (&#39;Alice&#39;, 80000, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">), (&#39;Bob&#39;, 90000, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          .update.run</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">program.transact(xa)</span></span></code></pre></div><p><strong>Magnum</strong> - Use <code>transactor().transact</code> block:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> transactor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Transactor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Magnum transactor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Single operation</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">transactor.transact {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO person(name, age) VALUES (&#39;Alice&#39;, 30)&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .update.run()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Multiple operations in a transaction</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">transactor.transact { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Provides implicit DbTx</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> p1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;INSERT INTO project(name, budget)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 VALUES (&#39;Project X&#39;, 100000)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 RETURNING id&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">             .query[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].run().head</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;INSERT INTO employee(name, salary, project_id)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        VALUES (&#39;Alice&#39;, 80000, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">), (&#39;Bob&#39;, 90000, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .update.run()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p><strong>Skunk</strong> - Use <code>session.transaction</code> block:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> session</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Session</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Skunk session</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Single operation</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> insertPerson</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ~</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO person(name, age) VALUES (</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">text</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">int4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.command</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">session.transaction.use { _ =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  session.prepare(insertPerson).flatMap(_.execute(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Alice&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ~</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Multiple operations in a transaction - define commands</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> insertProject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Query</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ~</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO project(name, budget) VALUES (</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">text</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">int4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">) RETURNING id&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .query(int4)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> insertEmployees</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)]] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> enc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (text </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">~</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> int4 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">~</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> int4).values.list(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  sql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO employee(name, salary, project_id) VALUES </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">enc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.command</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">session.transaction.use { _ =&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    p1 &lt;- session.prepare(insertProject).flatMap(_.unique(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Project X&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ~</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    _  &lt;- session.prepare(insertEmployees).flatMap(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            _.execute(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Alice&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, p1), (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Bob&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">90000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, p1)))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p><strong>Anorm</strong> - Operations within a connection block are transactional:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-scala"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// JDBC DataSource</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Single operation</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Manager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { use =&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  implicit</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Connection</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> use(dataSource.getConnection)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;INSERT INTO person(name, age) VALUES (&#39;Alice&#39;, 30)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.execute()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Multiple operations in a transaction</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Manager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { use =&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  implicit</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Connection</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> use(dataSource.getConnection)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  val</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> p1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;INSERT INTO project(name, budget)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 VALUES (&#39;Project X&#39;, 100000)&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">             .executeInsert().map(_.toInt).get</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;INSERT INTO employee(name, salary, project_id)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        VALUES (&#39;Alice&#39;, 80000, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">), (&#39;Bob&#39;, 90000, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .execute()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h2 id="_9-when-to-choose-what" tabindex="-1"><a class="header-anchor" href="#_9-when-to-choose-what"><span>9. When to choose what?</span></a></h2><h3 id="choose-molecule-if-you-value" tabindex="-1"><a class="header-anchor" href="#choose-molecule-if-you-value"><span>Choose Molecule if you value:</span></a></h3><ul><li><strong>Type safety throughout</strong> - Compile-time validation of your entire data model (entities, attributes, relationships, and values)</li><li><strong>Domain modeling</strong> - Work with Scala types and your business domain rather than SQL syntax</li><li><strong>Productivity</strong> - Write less boilerplate code for common operations</li><li><strong>Multi-entity operations</strong> - Update/insert across related entities in single operations</li><li><strong>Database portability</strong> - Switch databases without rewriting queries</li><li><strong>Team accessibility</strong> - No SQL expertise required for most operations</li></ul><h3 id="choose-a-plain-sql-library-if-you-need" tabindex="-1"><a class="header-anchor" href="#choose-a-plain-sql-library-if-you-need"><span>Choose a plain-SQL library if you need:</span></a></h3><ul><li><strong>Full SQL control</strong> - Direct access to all SQL features and optimizations</li><li><strong>Advanced SQL</strong> - Window functions, CTEs, complex subqueries, computed expressions</li><li><strong>Performance tuning</strong> - Fine-grained query optimization and database-specific features</li><li><strong>Existing SQL skills</strong> - Leverage team&#39;&#39;&#39;s SQL expertise</li><li><strong>Gradual adoption</strong> - Easy integration into existing SQL-based projects</li><li><strong>SQL tooling</strong> - Use standard SQL development tools and query analyzers</li></ul><h3 id="both-approaches-support" tabindex="-1"><a class="header-anchor" href="#both-approaches-support"><span>Both approaches support:</span></a></h3><ul><li>Type-safe parameter interpolation</li><li>Transaction management with rollback</li><li>Connection pooling and resource safety</li><li>Streaming large result sets</li><li>Mapping results to case classes</li></ul>`,61))])}const x=d(c,[["render",A]]),F=JSON.parse('{"path":"/database/sql-libs/plain-sql.html","title":"Plain SQL","lang":"en-US","frontmatter":{"description":"Plain SQL Plain-SQL libraries allow you to write SQL directly, typically through string interpolators or lightweight wrappers, with minimal abstraction. Quick Comparison - CRUD ...","toc":{"levels":[2,3]},"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Plain SQL\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-21T20:01:00.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://www.scalamolecule.org/intro/database/sql-libs/plain-sql.html"}],["meta",{"property":"og:site_name","content":"Scala Molecule"}],["meta",{"property":"og:title","content":"Plain SQL"}],["meta",{"property":"og:description","content":"Plain SQL Plain-SQL libraries allow you to write SQL directly, typically through string interpolators or lightweight wrappers, with minimal abstraction. Quick Comparison - CRUD ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-12-21T20:01:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-21T20:01:00.000Z"}]]},"git":{"createdTime":1766347260000,"updatedTime":1766347260000,"contributors":[{"name":"marcgrue","username":"marcgrue","email":"marcgrue@gmail.com","commits":1,"url":"https://github.com/marcgrue"}]},"filePathRelative":"database/sql-libs/plain-sql.md","autoDesc":true}');export{x as comp,F as data};
