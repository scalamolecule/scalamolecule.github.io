<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link href='http://fonts.googleapis.com/css?family=Merriweather+Sans:400,300,300italic,400italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
  <title>Get</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/highlight/styles/solarized_light.css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="/vendor/font-awesome/css/font-awesome.min.css">
  <link href="/css/style.css" rel="stylesheet">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon-57-precomposed.png">
  <link rel="shortcut icon" href="/img/favicon.png">
  <link href="" rel="alternate" type="application/rss+xml" title="Molecule" />
</head>
<body>
<div class="wrapper">
<div class="container" style="padding-top:20px">
  <div class="col-md-12 column" style="padding-left:0px; margin-bottom:15px">
    <div class="col-md-12 column" style="padding-left:0px;height:50px;">

    <ul class="nav nav-pills">
      <li><a href="/" style="padding-left: 6px; padding-right: 13px; vertical-align: top; margin-top: 0px;"><img src="/img/logo/MoleculeLogo600.png" alt="" width="200"></a></li>
      
      <li class="dropdown ">
        <a data-toggle="dropdown" href="/compare/" target="_top" onclick="javascript:top.location = '\/compare\/';return true;">Compare</a>
          <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
            <li><a href="/compare/datomic/">Datomic</a></li>
            <li class="dropdown-submenu">
              <a href="/compare/sql/">SQL</a>
              <ul class="dropdown-menu">
                <li><a href="/compare/sql/slick/">Slick</a></li>
              </ul>
            </li>
            <li><a href="/compare/gremlin/">Gremlin</a></li>
        </ul>
      </li>
      <li class="dropdown ">
        <a data-toggle="dropdown" href="/resources/" target="_top" onclick="javascript:top.location = '\/resources\/';return true;">Resources</a>
          <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
            <li class="dropdown-submenu">
              <a href="/resources/tutorials/">Tutorials</a>
              <ul class="dropdown-menu">
                <li><a href="/resources/tutorials/seattle/">Seattle</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
              <a href="/resources/videos/">Videos</a>
              <ul class="dropdown-menu">
                <li><a href="/resources/videos/2017-04-25_marc_grue/">Molecule presentation</a></li>
              </ul>
            </li>
        </ul>
      </li>
      <li class="dropdown active">
        <a data-toggle="dropdown" href="/docs/" target="_top" onclick="javascript:top.location = '\/docs\/';return true;">Docs</a>
          <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
            <li class="dropdown-submenu">
              <a href="/docs/">Documentation</a>
              <ul class="dropdown-menu">
                <li><a href="/docs/documentation/introduction/">Introduction</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
              <a href="/docs/getting-started/">Getting started</a>
              <ul class="dropdown-menu">
                <li><a href="/docs/getting-started/setup/">Setup</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
              <a href="/docs/schema/">Schema</a>
              <ul class="dropdown-menu">
                <li><a href="/docs/schema/transaction/">Transaction</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
              <a href="/docs/attributes/">Attributes</a>
              <ul class="dropdown-menu">
                <li><a href="/docs/attributes/basics/">Basics</a></li>
                <li><a href="/docs/attributes/modes/">Mandatory/Tacet/Optional</a></li>
                <li><a href="/docs/attributes/mapped/">Map attributes</a></li>
                <li><a href="/docs/attributes/expressions/">Expressions</a></li>
                <li><a href="/docs/attributes/aggregates/">Aggregates</a></li>
                <li><a href="/docs/attributes/parameterized/">Parameterized</a></li>
              </ul>
            </li>
            <li><a href="/docs/entities/">Entities</a></li>
            <li class="dropdown-submenu">
              <a href="/docs/relationships/">Relationships</a>
              <ul class="dropdown-menu">
                <li><a href="/docs/relationships/card-one/">Cardinality one</a></li>
                <li><a href="/docs/relationships/card-many/">Cardinality many</a></li>
                <li><a href="/docs/relationships/composites/">Composites</a></li>
                <li><a href="/docs/relationships/bidirectional/">Bidirectional</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
              <a href="/docs/crud/">CRUD</a>
              <ul class="dropdown-menu">
                <li><a href="/docs/crud/save/">Save</a></li>
                <li><a href="/docs/crud/insert/">Insert</a></li>
                <li><a href="/docs/crud/get/">Get</a></li>
                <li><a href="/docs/crud/update/">Update</a></li>
                <li><a href="/docs/crud/retract/">Retract</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
              <a href="/docs/transactions/">Transactions</a>
              <ul class="dropdown-menu">
                <li><a href="/docs/transactions/tx-meta-data/">Tx meta data</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
              <a href="/docs/time/">Time</a>
              <ul class="dropdown-menu">
                <li><a href="/docs/time/asof-since/">AsOf/Since</a></li>
                <li><a href="/docs/time/history/">History</a></li>
                <li><a href="/docs/time/with/">With</a></li>
                <li><a href="/docs/time/testing/">Testing</a></li>
              </ul>
            </li>
        </ul>
      </li>
      <li class="dropdown ">
        <a data-toggle="dropdown" href="/dev/" target="_top" onclick="javascript:top.location = '\/dev\/';return true;">Dev</a>
          <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
            <li><a href="/dev/">Developer</a></li>
            <li><a href="/dev/boilerplate/">Boilerplate</a></li>
            <li><a href="/dev/transformation/">Transformation</a></li>
        </ul>
      </li>
      <li class="dropdown ">
        <a data-toggle="dropdown" href="/community/" target="_top" onclick="javascript:top.location = '\/community\/';return true;">Community</a>
          <ul class="dropdown-menu level1" role="menu" aria-labelledby="dropdownMenu">
        </ul>
      </li>
      <li>
        <div  style="padding-left:14px;padding-top:19px;height:24px;float:right;">
            <a href="https://github.com/scalamolecule/molecule" class="github-button" data-icon="octicon-star">Github</a>
            
          </div>
      </li>
    </ul>

</div>
  </div> 

<div class="col-sm-10 column" style="padding-left:8px;">
	

<h1 id="get-read-data">Get (read) Data</h1>

<p>We get/read data from the database by calling <code>get</code> on a molecule. This returns an <code>Iterable</code> of tuples that match
the molecule attributes (except for arity-1):</p>

<pre><code class="language-scala">val persons1attr: Iterable[String] = Person.name.get

val persons2attrs: Iterable[(String, Int)] = Person.name.age.get

val persons3attrs: Iterable[(String, Int, String)] = Person.name.age.likes.get

// Etc.. to arity 22
</code></pre>

<h3 id="with-entity-id">With entity id</h3>

<p>Attributes of some entity are easily fetched by applying an entity id to the first namespace in the molecule</p>

<pre><code class="language-scala">Person(fredId).name.age.likes.get.head === List(&quot;Fred&quot;, 38, &quot;pizza&quot;) // (Iterable implicitly converted to List
</code></pre>

<p>The entity id is used for the first attribute of the molecule, here <code>name</code> having entity id <code>fredId</code>.</p>

<p><code>Person</code> is just the namespace for the following attributes, so that we get <code>:person/name</code>, <code>:person/age</code>, <code>:person/likes</code> etc..</p>

<h3 id="big-molecules">Big molecules</h3>

<p>The more attributes a molecule has, the longer it takes to compile. Once we get over 14-16 attributes we might start seeing compilation
slowing down depending on our hardware. There&rsquo;s an easy trick to split up large molecules into
<a href="/docs/relationships/composites/">composite</a> molecules consisting of smaller sub-molecules:</p>

<pre><code class="language-scala">// Tough on the compiler
m(Ns(id).a1.a2.a3.a4.a5.a6.a7.a8.a9.a10.a11.a12.a13.a14.a15.a16.a17.a18.a19.a20.a21.a22).get

// faster
m(Ns(id).a1.a2.a3.a4.a5.a6.a7.a8.a9.a10.a11 ~ Ns.a12.a13.a14.a15.a16.a17.a18.a19.a20.a21.a22).get

// Fastest
m(Ns(id).a1.a2.a3.a4.a5.a6.a7 ~ Ns.a8.a9.a10.a11.a12.a13.a14 ~ Ns.a15.a16.a17.a18.a19.a20.a21.a22).get
</code></pre>

<p>With this technique we can even build molecules bigger than arity-22</p>

<pre><code class="language-scala">m(Ns(id).a1.a2.a3.a4.a5.a6.a7 
    ~ Ns.a8.a9.a10.a11.a12.a13.a14 
    ~ Ns.a15.a16.a17.a18.a19.a20.a21.a22
    ~ Ns.a23.a24.a25.a26.a27.a28.a29.a30
).get
// Etc...
</code></pre>

<h2 id="2-steps-with-entity-api">2-steps with Entity API</h2>

<p>Molecules can get optional attributes which make them flexible to get irregular data sets. We could for instance fetch some
Persons where some of them has no <code>likes</code> asserted:</p>

<pre><code class="language-scala">Person.name.age.likes$.get === List(
  (&quot;Fred&quot;, 38, Some(&quot;pizza&quot;)),
  (&quot;Lisa&quot;, 7, None),
  (&quot;Ben&quot;, 5, Some(&quot;pizza&quot;))
)
</code></pre>

<p>An alternative is to get the data in 2 steps:</p>

<ol>
<li>Define the shape of the data set with a molecule and get the entity ids</li>
<li>Get attribute values using the entity api</li>
</ol>

<p>This way we can for instance in the first step get the mandatory data (<code>name</code> and <code>age</code>) with a molecule and then in a second step
ask for optional data (<code>likes</code>) for each entity:</p>

<pre><code class="language-scala">// Step 1
val seed: Iterable[(Long, String, Int)] = Person.e.name.age.get

// Step 2
val data: Iterable[(String, Int, Option[String])] = seed.map { case (e, name, age) =&gt;
  // Add optional `likes` value via entity api
  (name, age, e[String](&quot;:person/likes&quot;))
}
</code></pre>

<p>For this simple example, the original molecule with an optional <code>likes</code> attribute would of course have been sufficient and
more concise. But for more complex interconnected data this approach can be a good extra tool in the toolbox.</p>

<h2 id="raw-untyped-data">Raw untyped data</h2>

<p>If you need big data sets returned for batch processing for instance, then you might not need to cast every row of data. In that case you
can get raw data from a Datomic query by calling <code>getRaw</code> on a molecule:</p>

<pre><code class="language-scala">val rawData: Iterable[java.util.List[Object]] = Person.name.age.likes.getRaw
         //    rows         row      attrs
</code></pre>

<h3 id="next">Next</h3>

<p><a href="/docs/crud/update">Update&hellip;</a></p>

</div>

<div class="col-sm-2 column" style="padding-left:20px;padding-top:22px;padding-right: 0px;">
  <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm ">

  <div style="position:absolute;top: -36px; left: 0px;">
    
    <a class="navigation-control up" href="/docs/crud" style="position:absolute; top:0px; left: 56px">
      <span class="glyphicon glyphicon-chevron-up"></span>
    </a>
    
    
    <a class="navigation-control left" href="/docs/crud/insert" style="position:absolute; top: 15px; left: 20px">
      <span class="glyphicon glyphicon-chevron-left"></span>
    </a>
    
    
    <a class="navigation-control right" href="/docs/crud/update" style="position:absolute; top: 15px; left: 89px">
      <span class="glyphicon glyphicon-chevron-right"></span>
    </a>
    
    
    <a class="navigation-control right" href="/docs/transactions" style="position:absolute; top: 30px; left: 54px;">
      <span class="glyphicon glyphicon-chevron-down"></span>
    </a>
    
  </div>

  <ul class="bs-docs-sidenav">
    
    
    
    
    <li><a href="/docs/">Documentation</a></li>
    
    <ul class="level2">
      
      <li><a href="/docs/documentation/introduction/">Introduction</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/docs/getting-started/">Getting started</a></li>
    
    <ul class="level2">
      
      <li><a href="/docs/getting-started/setup/">Setup</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/docs/schema/">Schema</a></li>
    
    <ul class="level2">
      
      <li><a href="/docs/schema/transaction/">Transaction</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/docs/attributes/">Attributes</a></li>
    
    <ul class="level2">
      
      <li><a href="/docs/attributes/basics/">Basics</a></li>
      
      
      
      <li><a href="/docs/attributes/modes/">Mandatory/Tacet/Optional</a></li>
      
      
      
      <li><a href="/docs/attributes/mapped/">Map attributes</a></li>
      
      
      
      <li><a href="/docs/attributes/expressions/">Expressions</a></li>
      
      
      
      <li><a href="/docs/attributes/aggregates/">Aggregates</a></li>
      
      
      
      <li><a href="/docs/attributes/parameterized/">Parameterized</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/docs/entities/">Entities</a></li>
    
    
    
    
    <li><a href="/docs/relationships/">Relationships</a></li>
    
    <ul class="level2">
      
      <li><a href="/docs/relationships/card-one/">Cardinality one</a></li>
      
      
      
      <li><a href="/docs/relationships/card-many/">Cardinality many</a></li>
      
      
      
      <li><a href="/docs/relationships/composites/">Composites</a></li>
      
      
      
      <li><a href="/docs/relationships/bidirectional/">Bidirectional</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/docs/crud/">CRUD</a></li>
    
    <ul class="level2">
      
      <li><a href="/docs/crud/save/">Save</a></li>
      
      
      
      <li><a href="/docs/crud/insert/">Insert</a></li>
      
      
      
      <li class="active"><b>Get</b></li>
      
      
      
      <li><a href="/docs/crud/update/">Update</a></li>
      
      
      
      <li><a href="/docs/crud/retract/">Retract</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/docs/transactions/">Transactions</a></li>
    
    <ul class="level2">
      
      <li><a href="/docs/transactions/tx-meta-data/">Tx meta data</a></li>
      
      
    </ul>
    
    
    
    
    <li><a href="/docs/time/">Time</a></li>
    
    <ul class="level2">
      
      <li><a href="/docs/time/asof-since/">AsOf/Since</a></li>
      
      
      
      <li><a href="/docs/time/history/">History</a></li>
      
      
      
      <li><a href="/docs/time/with/">With</a></li>
      
      
      
      <li><a href="/docs/time/testing/">Testing</a></li>
      
      
    </ul>
    
    
    
    
    
  </ul>
</nav>
</div>

     
  </div> 
</div> 
<div class="push"></div>
</div> 

<footer class="bs-docs-footer">

  <div class="container">
    <ul class="bs-docs-footer-links">
      <li style="vertical-align: top; margin-top: 0px;"><a href="/front/"><img src="/img/logo/MoleculeLogo200.png" alt=""></a></li>
      <li><a href="https://github.com/scalamolecule/molecule">GitHub</a></li>
      <li><a href="https://github.com/scalamolecule/molecule-docs">GitHub-docs</a></li>
      <li><a href="https://groups.google.com/forum/#!forum/molecule-dsl">Forum</a></li>
      <li><a href="/about/">About</a></li>
      <li><a href="/credits/">Credits</a></li>
    </ul>
    <p>Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="license">Apache License 2.0</a></p>
  </div>
</footer>


<script type="text/javascript" src="/js/jquery-1.11.2.min.js"></script>



<script type="text/javascript" src="/js/bootstrap.min.js"></script>



<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/scripts.js"></script>




<script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2787756-3', 'auto');
  ga('send', 'pageview');
</script>
    
</body>
</html>
